<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üçπ</text></svg>">
    <title>Cocktails List</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            touch-action: manipulation; /* –£–ª—É—á—à–∞–µ—Ç –æ—Ç–∫–ª–∏–∫ –Ω–∞ –∫–∞—Å–∞–Ω–∏—è */
        }

        .cocktail-item {
            opacity: 0;
            transform: translateY(20px);
            animation: fadeIn 0.3s ease-out forwards;
            /* –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –∑–æ–Ω—É –∫–∞—Å–∞–Ω–∏—è –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö */
            min-height: 44px;
            display: flex;
            align-items: center;
        }

        @keyframes fadeIn {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .selected-cocktail-li {
            background-color: #e0f2fe;
            font-weight: 600;
            color: #0369a1;
            border-left: 4px solid #0369a1; /* –í–∏–∑—É–∞–ª—å–Ω—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –≤—ã–±–æ—Ä–∞ */
        }

        .dark .selected-cocktail-li {
            background-color: #0c4a6e;
            color: #bae6fd;
            font-weight: 600;
            border-left: 4px solid #bae6fd;
        }

        #cocktailDetailView {
            transition: all 0.3s ease-in-out;
            transform: translateY(100%);
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            z-index: 50;
            background: white;
            border-radius: 20px 20px 0 0;
            box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.1);
            max-height: 80vh;
            overflow-y: auto;
        }

        .dark #cocktailDetailView {
            background: #1f2937;
            box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.3);
        }

        #cocktailDetailView.active {
            transform: translateY(0);
        }

        .filter-button {
            transition: all 0.2s ease-in-out;
            min-height: 44px; /* –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∑–æ–Ω–∞ –∫–∞—Å–∞–Ω–∏—è –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö */
            white-space: nowrap;
        }

        .ingredient-qty {
            font-weight: 600;
            color: #0284c7;
        }

        .dark .ingredient-qty {
            color: #38bdf8;
        }

        /* –£–ª—É—á—à–µ–Ω–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö */
        #cocktailListContainer {
            -webkit-overflow-scrolling: touch;
        }

        /* –ê–Ω–∏–º–∞—Ü–∏—è –¥–ª—è –∫–Ω–æ–ø–æ–∫ */
        .filter-button:active {
            transform: scale(0.95);
        }

        .cocktail-item:active {
            transform: scale(0.98);
        }

        /* –£–ª—É—á—à–µ–Ω–Ω—ã–π –ø–æ–∏—Å–∫ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö */
        #searchBox {
            font-size: 16px; /* –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –∑—É–º –Ω–∞ iOS */
        }

        /* Backdrop –¥–ª—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ */
        .modal-backdrop {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 40;
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
            pointer-events: none;
        }

        .modal-backdrop.active {
            opacity: 1;
            pointer-events: auto;
        }

        /* Swipe –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä */
        .swipe-indicator {
            width: 40px;
            height: 4px;
            background: #d1d5db;
            border-radius: 2px;
            margin: 12px auto 8px;
        }

        .dark .swipe-indicator {
            background: #4b5563;
        }

        /* Sticky header –¥–ª—è –¥–µ—Ç–∞–ª–µ–π */
        .detail-header {
            position: sticky;
            top: 0;
            background: inherit;
            z-index: 10;
            padding-bottom: 1rem;
            border-bottom: 1px solid #e5e7eb;
        }

        .dark .detail-header {
            border-bottom: 1px solid #374151;
        }
    </style>
</head>

<body class="bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300 transition-colors duration-300">
    <!-- Backdrop –¥–ª—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ -->
    <div id="modalBackdrop" class="modal-backdrop"></div>

    <div class="container mx-auto max-w-3xl bg-white dark:bg-gray-800 min-h-screen relative">
        <!-- Sticky Header -->
        <header class="sticky top-0 bg-white dark:bg-gray-800 z-30 p-4 md:p-6 border-b border-gray-200 dark:border-gray-700">
            <div class="text-center mb-4">
                <h1 class="text-3xl md:text-4xl font-bold text-sky-700 dark:text-sky-400">üçπ Cocktails</h1>
                <p class="text-gray-600 dark:text-gray-400 text-sm md:text-base">Find your perfect drink</p>
            </div>

            <!-- –ü–æ–∏—Å–∫ -->
            <div class="mb-4">
                <input type="text" id="searchBox" placeholder="Search cocktails..."
                    class="w-full p-3 md:p-4 border border-gray-300 dark:border-gray-600 rounded-xl shadow-sm focus:ring-2 focus:ring-sky-500 focus:border-sky-500 transition-all text-base dark:bg-gray-700 dark:text-white dark:placeholder-gray-400"
                    aria-label="Search for a cocktail">
            </div>

            <!-- –§–∏–ª—å—Ç—Ä—ã —Å –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–π –ø—Ä–æ–∫—Ä—É—Ç–∫–æ–π -->
            <div class="overflow-x-auto pb-2">
                <div id="filterContainer" class="flex gap-2 min-w-max">
                    <button data-category="all"
                        class="filter-button active-filter bg-sky-600 text-white dark:bg-sky-500 dark:text-white shadow-md hover:bg-sky-700 dark:hover:bg-sky-600 py-2 px-4 rounded-xl font-medium">All</button>
                    <button data-category="signature"
                        class="filter-button bg-gray-200 text-gray-700 dark:bg-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 py-2 px-4 rounded-xl font-medium">Signature</button>
                    <button data-category="bombay"
                        class="filter-button bg-gray-200 text-gray-700 dark:bg-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 py-2 px-4 rounded-xl font-medium">Bombay</button>
                    <button data-category="classic"
                        class="filter-button bg-gray-200 text-gray-700 dark:bg-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 py-2 px-4 rounded-xl font-medium">Classic</button>
                </div>
            </div>
        </header>

        <!-- –°–ø–∏—Å–æ–∫ –∫–æ–∫—Ç–µ–π–ª–µ–π -->
        <div id="cocktailListContainer" class="p-4 pb-20">
            <ul id="cocktailList" class="space-y-2">
                <li id="noResults" class="p-4 text-center text-gray-500 dark:text-gray-400 hidden">
                    <div class="text-4xl mb-2">üîç</div>
                    <div>No cocktails found</div>
                    <div class="text-sm">Try a different search</div>
                </li>
            </ul>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –¥–µ—Ç–∞–ª—è–º–∏ (—Å–Ω–∏–∑—É) -->
    <div id="cocktailDetailView">
        <div class="swipe-indicator"></div>
        <div class="p-4 md:p-6">
            <div class="detail-header">
                <div class="flex justify-between items-start mb-4">
                    <h2 id="detailName" class="text-2xl md:text-3xl font-bold text-sky-600 dark:text-sky-400 pr-4"></h2>
                    <button id="closeDetails"
                        class="text-gray-500 hover:text-red-500 dark:text-gray-400 dark:hover:text-red-400 text-2xl p-2 -m-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"
                        aria-label="Close details">‚úï</button>
                </div>
            </div>

            <!-- –î–µ—Ç–∞–ª–∏ –∫–æ–∫—Ç–µ–π–ª—è -->
            <div class="space-y-4">
                <!-- –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –≤ –∫–∞—Ä—Ç–æ—á–∫–∞—Ö -->
                <div class="grid grid-cols-2 gap-3">
                    <div class="bg-gray-50 dark:bg-gray-700/50 p-3 rounded-lg">
                        <div class="text-sky-600 dark:text-sky-400 font-semibold text-sm">Method</div>
                        <div id="detailMethod" class="text-gray-800 dark:text-gray-200 text-sm"></div>
                    </div>
                    <div class="bg-gray-50 dark:bg-gray-700/50 p-3 rounded-lg">
                        <div class="text-sky-600 dark:text-sky-400 font-semibold text-sm">Glass</div>
                        <div id="detailGlass" class="text-gray-800 dark:text-gray-200 text-sm"></div>
                    </div>
                    <div class="bg-gray-50 dark:bg-gray-700/50 p-3 rounded-lg">
                        <div class="text-sky-600 dark:text-sky-400 font-semibold text-sm">Ice</div>
                        <div id="detailIce" class="text-gray-800 dark:text-gray-200 text-sm"></div>
                    </div>
                    <div class="bg-gray-50 dark:bg-gray-700/50 p-3 rounded-lg">
                        <div class="text-sky-600 dark:text-sky-400 font-semibold text-sm">Garnish</div>
                        <div id="detailGarnish" class="text-gray-800 dark:text-gray-200 text-sm"></div>
                    </div>
                </div>

                <!-- –ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã -->
                <div class="bg-sky-50 dark:bg-sky-900/30 p-4 rounded-lg">
                    <h3 class="text-lg font-semibold text-sky-700 dark:text-sky-400 mb-3">üìù Ingredients</h3>
                    <ul id="detailIngredients" class="space-y-2">
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script src="cocktails-data.js"></script>
    <script>
        // –î–∞–Ω–Ω—ã–µ –∫–æ–∫—Ç–µ–π–ª–µ–π –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ –≤–Ω–µ—à–Ω–µ–≥–æ —Ñ–∞–π–ª–∞ cocktails-data.js
        // –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è allCocktails –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –≤ —Ç–æ–º —Ñ–∞–π–ª–µ

        // DOM Elements
        const searchBoxEl = document.getElementById('searchBox');
        const cocktailListUl = document.getElementById('cocktailList');
        const noResultsLi = document.getElementById('noResults');
        const cocktailDetailViewDiv = document.getElementById('cocktailDetailView');
        const modalBackdrop = document.getElementById('modalBackdrop');
        const detailNameH2 = document.getElementById('detailName');
        const detailMethodSpan = document.getElementById('detailMethod');
        const detailGlassSpan = document.getElementById('detailGlass');
        const detailIceSpan = document.getElementById('detailIce');
        const detailGarnishSpan = document.getElementById('detailGarnish');
        const detailIngredientsUl = document.getElementById('detailIngredients');
        const closeDetailsButton = document.getElementById('closeDetails');
        const filterContainer = document.getElementById('filterContainer');

        let currentlySelectedLi = null;
        let currentCategory = 'all';

        // Touch handling –¥–ª—è —Å–≤–∞–π–ø–∞ –≤–Ω–∏–∑
        let touchStartY = 0;
        let touchEndY = 0;

        cocktailDetailViewDiv.addEventListener('touchstart', (e) => {
            touchStartY = e.changedTouches[0].screenY;
        });

        cocktailDetailViewDiv.addEventListener('touchend', (e) => {
            touchEndY = e.changedTouches[0].screenY;
            if (touchEndY - touchStartY > 50) { // –°–≤–∞–π–ø –≤–Ω–∏–∑ –Ω–∞ 50px+
                closeCocktailDetails();
            }
        });

        // –ü—Ä–∏–º–µ–Ω—è–µ–º —Ç–µ–º–Ω—É—é —Ç–µ–º—É
        document.documentElement.classList.add('dark');

        function setActiveFilterButton(selectedButton) {
            document.querySelectorAll('#filterContainer .filter-button').forEach(btn => {
                btn.classList.remove('active-filter', 'bg-sky-600', 'text-white', 'dark:bg-sky-500', 'dark:text-white', 'shadow-md');
                btn.classList.add('bg-gray-200', 'text-gray-700', 'dark:bg-gray-700', 'dark:text-gray-300');
            });
            selectedButton.classList.add('active-filter', 'bg-sky-600', 'text-white', 'dark:bg-sky-500', 'dark:text-white', 'shadow-md');
            selectedButton.classList.remove('bg-gray-200', 'text-gray-700', 'dark:bg-gray-700', 'dark:text-gray-300');
        }

        function setActiveCocktailListItem(listItem) {
            if (currentlySelectedLi && currentlySelectedLi !== listItem) {
                currentlySelectedLi.classList.remove('selected-cocktail-li');
            }
            currentlySelectedLi = listItem;
            if (currentlySelectedLi) {
                currentlySelectedLi.classList.add('selected-cocktail-li');
            }
        }

        function filterAndDisplayCocktails() {
            const searchTerm = searchBoxEl.value.toLowerCase().trim();
            let filteredByCategory = allCocktails;

            if (currentCategory !== 'all') {
                filteredByCategory = allCocktails.filter(cocktail => cocktail.category === currentCategory);
            }

            const fullyFiltered = filteredByCategory.filter(cocktail =>
                cocktail.name.toLowerCase().includes(searchTerm) ||
                cocktail.ingredients.some(ing => ing.name.toLowerCase().includes(searchTerm))
            );

            displayCocktails(fullyFiltered);
        }

        function displayCocktails(cocktailsToDisplay) {
            cocktailListUl.innerHTML = '';
            noResultsLi.classList.add('hidden');

            if (cocktailsToDisplay.length === 0) {
                noResultsLi.classList.remove('hidden');
                return;
            }

            cocktailsToDisplay.forEach((cocktail, index) => {
                const li = document.createElement('li');
                li.className = 'cocktail-item p-4 bg-white dark:bg-gray-700/50 hover:bg-sky-50 dark:hover:bg-sky-800/30 text-gray-800 dark:text-gray-200 cursor-pointer rounded-xl shadow-sm border border-gray-200 dark:border-gray-600 transition-all duration-200';
                li.style.animationDelay = `${index * 0.05}s`;
                
                li.innerHTML = `
                    <div class="flex justify-between items-center">
                        <span class="font-medium">${cocktail.name}</span>
                        <span class="text-xs bg-sky-100 dark:bg-sky-900/50 text-sky-700 dark:text-sky-300 px-2 py-1 rounded-full">${cocktail.category}</span>
                    </div>
                `;
                li.dataset.id = cocktail.id;

                li.addEventListener('click', () => {
                    showCocktailDetails(cocktail.id);
                    setActiveCocktailListItem(li);
                });
                cocktailListUl.appendChild(li);
            });
        }

        function showCocktailDetails(cocktailId) {
            const cocktail = allCocktails.find(c => c.id === cocktailId);
            if (!cocktail) {
                console.error("Cocktail not found:", cocktailId);
                return;
            }

            detailNameH2.textContent = cocktail.name;
            detailMethodSpan.textContent = cocktail.method || 'N/A';
            detailGlassSpan.textContent = cocktail.glass || 'N/A';
            detailIceSpan.textContent = cocktail.ice || 'N/A';
            detailGarnishSpan.textContent = cocktail.garnish || 'N/A';

            detailIngredientsUl.innerHTML = '';
            if (cocktail.ingredients && cocktail.ingredients.length > 0) {
                cocktail.ingredients.forEach(ing => {
                    const li = document.createElement('li');
                    li.className = 'flex justify-between items-center py-2 border-b border-gray-200 dark:border-gray-600 last:border-b-0';
                    li.innerHTML = `
                        <span class="text-gray-800 dark:text-gray-200">${ing.name}</span>
                        <span class="ingredient-qty font-semibold">${ing.qty}</span>
                    `;
                    detailIngredientsUl.appendChild(li);
                });
            }

            modalBackdrop.classList.add('active');
            cocktailDetailViewDiv.classList.add('active');
            document.body.style.overflow = 'hidden'; // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –ø—Ä–æ–∫—Ä—É—Ç–∫—É —Ñ–æ–Ω–∞
        }

        function closeCocktailDetails() {
            modalBackdrop.classList.remove('active');
            cocktailDetailViewDiv.classList.remove('active');
            document.body.style.overflow = ''; // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø—Ä–æ–∫—Ä—É—Ç–∫—É
            setActiveCocktailListItem(null);
        }

        // Event Listeners
        filterContainer.addEventListener('click', (e) => {
            if (e.target.tagName === 'BUTTON') {
                const button = e.target.closest('.filter-button');
                if (button) {
                    currentCategory = button.dataset.category;
                    setActiveFilterButton(button);
                    filterAndDisplayCocktails();
                    closeCocktailDetails();
                }
            }
        });

        searchBoxEl.addEventListener('input', filterAndDisplayCocktails);
        closeDetailsButton.addEventListener('click', closeCocktailDetails);
        modalBackdrop.addEventListener('click', closeCocktailDetails);

        // ESC key –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeCocktailDetails();
            }
        });

        // Initial load
        filterAndDisplayCocktails();
    </script>
</body>

</html>